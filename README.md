# êµë‚´ ì‹¤ë‚´ ì§€ë„ ì•± (Indoor Campus Map)

> **ì‹¤ë‚´ ìœ„ì¹˜ ì¶”ì  + ì¸µë³„ ë„ë©´ ë‚´ ë‚´ ìœ„ì¹˜ í‘œì‹œ + QR ì¶œì„**ì„ í•œ ì•±ì—ì„œ.
> ìƒì—…ì„±ì„ ê³ ë ¤í•œ
> **ë¹„ì½˜ ê¸°ë°˜ ì‹¤ë‚´ ë‚´ë¹„ê²Œì´ì…˜Â·QR ì¶œì„Â·ì‹œì„¤ ì •ë³´ ì—°ê³„** MVP.

---

## âš¡ï¸ í•µì‹¬ ìš”ì•½

* **ë¬¸ì œ**: ë³µì¡í•œ êµë‚´ ê±´ë¬¼ì—ì„œ ê°•ì˜ì‹¤/ì‹œì„¤ íƒìƒ‰ì´ ì–´ë µê³ , ì¶œì„Â·ì‹œì„¤ ì•ˆë‚´ê°€ ë¶„ì ˆì .
* **í•´ê²°**: ì¸µë³„ ë„ë©´ ìœ„ì— í˜„ì¬ ìœ„ì¹˜(ë¹„ì½˜/BLE)ì™€ **ëª©ì ì§€ ê²½ë¡œ íŒíŠ¸**, **QR ì¶œì„**ì„ í†µí•© ì œê³µ.
* **ì°¨ë³„ì **: ì§€ë„/ì¶œì„/ì‹œì„¤ ì •ë³´ë¥¼ **í•œ í™”ë©´ íë¦„**ìœ¼ë¡œ ì—°ê²°, **ì˜¤í”„ë¼ì¸ í™˜ê²½**ì—ì„œë„ ë™ì‘ ê°€ëŠ¥í•œ **ë„ë©´ ê¸°ë°˜ ë Œë”ë§**.

---

## ğŸ§­ ì£¼ìš” ê¸°ëŠ¥ (Features)

* **ì‹¤ë‚´ ì§€ë„(ì¸µë³„ ë„ë©´) ë·°ì–´**: Pinch-to-zoom, ë“œë˜ê·¸, ì‹¤ ì¢Œí‘œ ìŠ¤ì¼€ì¼ë§.
* **ë‚´ ìœ„ì¹˜ í‘œì‹œ(Î²)**: BLE Beacon RSSI ìŠ¤ìº” â†’ ë„ë©´ ì¢Œí‘œë¡œ ë§¤í•‘(ì‚¼ë³€ì¸¡ëŸ‰ ê¸°ë°˜/ë³´ì • ì§€ì› ì˜ˆì •).
* **ë¹ ë¥¸ íƒìƒ‰**: ëŒ€í‘œ ê°•ì˜ì‹¤/ì‹œì„¤ ë°”ë¡œê°€ê¸°, ì¦ê²¨ì°¾ê¸°(ê³„íš), ìµœê·¼ ë°©ë¬¸(ê³„íš).
* **QR ì¶œì„**: ê°•ì˜ì‹¤/ì‹œì„¤ QR ìŠ¤ìº” â†’ ì¶œì„/ì²´í¬ì¸ ì´ë²¤íŠ¸ ë°œí–‰(ë°±ì—”ë“œ ì—°ë™ ê°€ëŠ¥ êµ¬ì¡°).
* **ì‹œì„¤ ì •ë³´ íŒ¨ë„**: ê°•ì˜ì‹œê°„í‘œ/ì‹œì„¤í˜¼ì¡ë„/ìš´ì˜ì‹œê°„(ë°ì´í„° ì—°ë™ í¬ì¸íŠ¸ ì œê³µ).
* **ì˜¤í”„ë¼ì¸ ìš°ì„  ì„¤ê³„**: ë„ë©´/ì¢Œí‘œ ìºì‹œ, ë„¤íŠ¸ì›Œí¬ê°€ ì—†ì–´ë„ ê¸°ë³¸ íƒìƒ‰ ê°€ëŠ¥.

---

## ğŸ“± ìŠ¤í¬ë¦°ìƒ·


| í™ˆ/ë©”ë‰´                                 | ì¸µ ë„ë©´                                   | QR ìŠ¤ìº”                            | ë‚´ ìœ„ì¹˜                                     |
| ------------------------------------ | -------------------------------------- | -------------------------------- | ---------------------------------------- |
| ![home](assets/screenshots/home.png) | ![floor](assets/screenshots/floor.png) | ![qr](assets/screenshots/qr.png) | ![locate](assets/screenshots/locate.png) |

---

## ğŸ—ï¸ ì•„í‚¤í…ì²˜ ê°œìš”

* **Flutter (Dart)** ë‹¨ì¼ ì½”ë“œë² ì´ìŠ¤
* **Presentation**: `screens/*`, `widgets/*`
* **Domain**: ìœ„ì¹˜ ì¶”ì •Â·ì¢Œí‘œ ë§¤í•‘, QR ìŠ¤ìº”, ë£¸ ë©”íƒ€ë°ì´í„°
* **Data**: ë„ë©´ ë¦¬ì†ŒìŠ¤(`assets/`), ë¹„ì½˜ ì•µì»¤(ì˜ˆì •: `assets/json/beacons.json`)

```mermaid
flowchart LR
  User --> UI[Flutter UI]
  UI --> Map[Floor Plan Renderer]
  UI --> QR[QR Scanner]
  UI --> BLE[BLE Scanner]
  BLE --> Positioning[Beacon Trilateration & Filters]
  Positioning --> Map
  QR --> Events[Check-in/Attendance]
  Events --> Backend[(Optional Backend)]
```

---

## ğŸ“‚ ì£¼ìš” íŒŒì¼ ì•ˆë‚´ (ì´ ë¦¬í¬ì§€í† ë¦¬ ê¸°ì¤€)

> **ì•„ë˜ íŒŒì¼ëª…ì€ í˜„ì¬ í”„ë¡œì íŠ¸ì— í¬í•¨ëœ ì‹¤ì œ íŒŒì¼ëª…ê³¼ ë§¤í•‘ë©ë‹ˆë‹¤.**

* `lib/main.dart` â€” ì•± ì§„ì…ì , ë¼ìš°íŠ¸ ì´ˆê¸°í™”
* `lib/menu.dart` â€” í™ˆ/ë©”ë‰´ í™”ë©´(UI ì§„ì… í—ˆë¸Œ)
* `lib/campus_map_screen.dart` â€” ìº í¼ìŠ¤/ê±´ë¬¼ ì„ íƒ ë° ì¸µ ì§„ì…
* `lib/locate_button.dart` â€” ë‚´ ìœ„ì¹˜ ê°±ì‹ /í‘œì‹œ ë²„íŠ¼ ìœ„ì ¯
* `lib/qr_button.dart` â€” QR ì§„ì… ë²„íŠ¼ ìœ„ì ¯
* `lib/qr_floor_scanner_widget.dart` â€” ì¸µ ë„ë©´ ìœ„ QR ìŠ¤ìºë„ˆ ë·°(ì˜¤ë²„ë ˆì´)

í´ë”

```
lib/
 â”œâ”€ screens/
 â”‚   â”œâ”€ campus_map_screen.dart
 â”‚   â””â”€ floor/
 â”‚       â””â”€ building_floor_screen.dart
 â”œâ”€ widgets/
 â”‚   â”œâ”€ locate_button.dart
 â”‚   â”œâ”€ qr_button.dart
 â”‚   â””â”€ qr_floor_scanner_widget.dart
 â”œâ”€ data/
 â”‚   â”œâ”€ rooms.json           # ê°•ì˜ì‹¤/ì‹œì„¤ ì¢Œí‘œ ë©”íƒ€ë°ì´í„°
 â”‚   â”œâ”€ beacons.json         # ë¹„ì½˜ ì•µì»¤ ì¢Œí‘œ/UUID/TxPower
 â”‚   â””â”€ schedules.json       # ì‹œê°„í‘œ/ìš´ì˜ì‹œê°„
 â”œâ”€ core/
 â”‚   â”œâ”€ ble/
 â”‚   â”‚   â”œâ”€ scanner.dart     # flutter_beacon or flutter_blue_plus ë˜í¼
 â”‚   â”‚   â””â”€ trilateration.dart# ìœ„ì¹˜ ì¶”ì •(ê°€ì¤‘/ì¹¼ë§Œí•„í„° ì˜µì…˜)
 â”‚   â”œâ”€ qr/
 â”‚   â”‚   â””â”€ qr_service.dart  # qr_code_scanner/mobile_scanner ë˜í¼
 â”‚   â””â”€ map/
 â”‚       â””â”€ coord_mapper.dart# í”½ì…€â†”ì‹¤ì¢Œí‘œ ë³€í™˜, ë³´ì •
 â””â”€ main.dart
```

---

## ğŸ”§ ê°œë°œÂ·ì‹¤í–‰ ë°©ë²•

### í•„ìˆ˜ ìš”êµ¬ì‚¬í•­

* Flutter 3.x ì´ìƒ, Dart SDK í˜¸í™˜
* Android Studio ë˜ëŠ” VS Code + Flutter/Dart í™•ì¥
* (Android) SDK 33+, NDK/Gradle í˜¸í™˜ í™˜ê²½

### ê¶Œì¥ íŒ¨í‚¤ì§€(ë³€ê²½ ê°€ëŠ¥)

* **BLE**: `flutter_beacon` ë˜ëŠ” `flutter_blue_plus`
* **QR**: `qr_code_scanner` ë˜ëŠ” `mobile_scanner`
* **ìƒíƒœê´€ë¦¬**: `provider` / `riverpod` (ì„ íƒ)

### ì„¤ì¹˜

```bash
# 1) ì €ì¥ì†Œ í´ë¡ 
$ git clone https://github.com/<ORG_OR_USER>/<REPO>.git
$ cd <REPO>

# 2) ì˜ì¡´ì„± ì„¤ì¹˜
$ flutter pub get

# 3) ì‹¤í–‰ (ë””ë°”ì´ìŠ¤ ì—°ê²° í›„)
$ flutter run -d <deviceId>
```

### Android ê¶Œí•œ ì„¤ì • (ì¤‘ìš”)

`android/app/src/main/AndroidManifest.xml`

```xml
<!-- BLE ìŠ¤ìº”/ì—°ê²° ê¶Œí•œ (Android 12+) -->
<uses-permission android:name="android.permission.BLUETOOTH_SCAN" />
<uses-permission android:name="android.permission.BLUETOOTH_CONNECT" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />

<!-- QR ì¹´ë©”ë¼ ê¶Œí•œ -->
<uses-permission android:name="android.permission.CAMERA" />
```

ëŸ°íƒ€ì„ ê¶Œí•œ ìš”ì²­ ë¡œì§ì„ ì´ˆê¸° ì§„ì… ë˜ëŠ” ê¸°ëŠ¥ ì‚¬ìš© ì‹œ íŠ¸ë¦¬ê±°í•˜ì„¸ìš”.

### iOS ì„¤ì •(ì„ íƒ)

`Info.plist`ì— Bluetooth/Camera ì‚¬ìš© ì‚¬ìœ (NSBluetooth\*, NSCameraUsageDescription) ì¶”ê°€.

---

## ğŸ—ºï¸ ë„ë©´ ì¢Œí‘œ ë§¤í•‘ (ìš”ì )

* **ê¸°ì¤€ ì´ë¯¸ì§€ í¬ê¸°**: ì˜ˆ) 349Ã—227(px) â†’ ì‹¤ì œ ë¯¸í„° ë‹¨ìœ„ ìŠ¤ì¼€ì¼ ì •ì˜
* **ì•µì»¤(ë¹„ì½˜) ì¢Œí‘œ**: ë„ë©´ í”½ì…€ ì¢Œí‘œë¡œ ë“±ë¡ â†’ ì‹¤ì œ ê±°ë¦¬ ë³€í™˜ í•¨ìˆ˜ ì œê³µ
* **ì‚¼ë³€ì¸¡ëŸ‰** + **ê°€ì¤‘ì¹˜(RSSI/TxPower)** + **ì´ë™ í‰ê· /ì¹¼ë§Œ í•„í„°**ë¡œ ì¡ìŒ ì–µì œ
* **ìŠ¤ëƒ…í•‘**: ë³µë„/ì¶œì…êµ¬/ê³„ë‹¨ ë“± ê·¸ë˜í”„ ìœ„ë¡œ ìŠ¤ëƒ…í•˜ì—¬ ì‹œê°ì  ì í”„ ê°ì†Œ(ê³„íš)

---

## ğŸš€ ì‚¬ìš© íë¦„

1. **ê±´ë¬¼/ì¸µ ì„ íƒ** â†’ 2) **ë„ë©´ ë¡œë“œ** â†’ 3) **ë‚´ ìœ„ì¹˜ ë²„íŠ¼**ìœ¼ë¡œ ìŠ¤ìº” ì‹œì‘ â†’
2. **ë„ë©´ ìƒ ë‚´ ìœ„ì¹˜ í‘œì‹œ** â†’ 5) **QR ë²„íŠ¼**ìœ¼ë¡œ ì¶œì„/ì²´í¬ì¸

---

## ğŸ”Œ ë°±ì—”ë“œ ì—°ë™ í¬ì¸íŠ¸

* ì¶œì„ ì´ë²¤íŠ¸ POST: `/api/attendance/check-in` (body: userId, roomId, time, method=QR/BLE)
* ì‹œì„¤/ì‹œê°„í‘œ ì¡°íšŒ: `/api/facility/:id`, `/api/schedule/:room`

> í˜„ì¬ ì €ì¥ì†ŒëŠ” **í”„ëŸ°íŠ¸(Mobile Flutter)** ì¤‘ì‹¬. ì„œë²„ ìŠ¤í™ì€ `docs/api.md`ë¡œ ë¶„ë¦¬ ê¶Œì¥.

---

## ğŸ§ª ë¡œì»¬ ë””ë²„ê¹… íŒ

* `Expected to find project root` ì˜¤ë¥˜ â†’ í„°ë¯¸ë„ì˜ **í˜„ì¬ í´ë”ê°€ í”„ë¡œì íŠ¸ ë£¨íŠ¸ì¸ì§€** í™•ì¸.
* Gradle/SDK ì¶©ëŒ â†’ `flutter clean && flutter pub get` í›„ ë‹¤ì‹œ ë¹Œë“œ.
* Android 12+ BLE ìŠ¤ìº” ì•ˆ ë¨ â†’ **BLUETOOTH\_SCAN/CONNECT** ê¶Œí•œ + ìœ„ì¹˜ ê¶Œí•œ **ëŸ°íƒ€ì„ ìš”ì²­** ì²´í¬.
* QR ë¯¸ë™ì‘ â†’ ì¹´ë©”ë¼ ê¶Œí•œ, ì—ë®¬ë ˆì´í„° ëŒ€ì‹  ì‹¤ì œ ë””ë°”ì´ìŠ¤ ê¶Œì¥.

---

## ğŸ§­ ë¸Œëœì¹˜ ì „ëµ & ì»¤ë°‹ ì»¨ë²¤ì…˜

* ê¸°ë³¸: `dev` = í†µí•© ê°œë°œ ë¸Œëœì¹˜, `one` = ê°œì¸ ì‘ì—… ë¸Œëœì¹˜(ì˜ˆì‹œ). PR â†’ `dev` ë³‘í•©.
* ê¸´ê¸‰ í”½ìŠ¤: `hotfix/*`, ê¸°ëŠ¥: `feat/*`, ë¦¬íŒ©í„°: `refactor/*`
* **Conventional Commits** ê¶Œì¥:

  * `feat: BLE ìŠ¤ìº” ê°€ì¤‘ ë³´ì • ì¶”ê°€`
  * `fix: QR ìŠ¤ìºë„ˆ ì´ˆê¸°í™” í¬ë˜ì‹œ í•´ê²°`
  * `docs: README ì¢Œí‘œë§¤í•‘ ê°€ì´ë“œ ë³´ê°•`

---

## ğŸ—ºï¸ ë¡œë“œë§µ (Roadmap)

* [ ] ì¸µë³„ ë„ë©´ ë·°ì–´/ì¤Œ/ë“œë˜ê·¸
* [ ] QR ìŠ¤ìº” ì§„ì…/ìœ„ì ¯ êµ¬ì¡°
* [ ] Beacon ìŠ¤ìº” ë˜í¼ í†µí•©(`flutter_beacon`/`flutter_blue_plus` ì„ íƒ ê³ ì •)
* [ ] ì¢Œí‘œ ë§¤í•‘ ìœ í‹¸(í”½ì…€â†”ë¯¸í„° ë³€í™˜) + ì˜¤ì°¨ ë³´ì •
* [ ] í•„í„°(ì´ë™ í‰ê· /One Euro/ì¹¼ë§Œ) ì ìš© ì˜µì…˜í™”
* [ ] ê²½ë¡œ ìŠ¤ëƒ… & ì¥ì• ë¬¼ ë§µ ê³ ë ¤
* [ ] ì¦ê²¨ì°¾ê¸°/ìµœê·¼ ë°©ë¬¸/ì‹œì„¤ í˜¼ì¡ë„ ì—°ê³„
* [ ] ë°±ì—”ë“œ ì¶œì„ API ì—°ë™ ìƒ˜í”Œ

> **ë§ˆê° ê¸°ì¤€**: í•™ê¸° ìº¡ìŠ¤í†¤ ì¼ì •(5ì›” ë§) â†’ ì´í›„ ìœ ì§€ë³´ìˆ˜/ìƒí’ˆí™” ë‹¨ê³„.

---

## ğŸ§© ê¸°ì—¬ (Contributing)

1. ì´ìŠˆ ë“±ë¡ â†’ ì¬í˜„ ë°©ë²•/ê¸°ëŒ€/ì‹¤ì œ ê²°ê³¼ ì²¨ë¶€
2. ë¸Œëœì¹˜ ìƒì„± â†’ PR â†’ ë¦¬ë·° í›„ ë³‘í•©
3. ìŠ¤íƒ€ì¼: Dart format, analyzer ê²½ê³  0 ìœ ì§€

---

## ğŸ”’ ë¼ì´ì„ ìŠ¤

* MIT (í•„ìš”ì‹œ í•™êµ/í•™ê³¼ ëª…ì‹œ)

---

## ğŸ“¬ ë¬¸ì˜

* Maintainer: íŒ€ì¥/ë‹´ë‹¹ì 
* ì´ìŠˆ/ê¸°ëŠ¥ìš”ì²­: GitHub Issues ì´ìš©

---

## ë¶€ë¡ A. ë¹ ë¥¸ ì„ë² ë“œ ì½”ë“œ ìŠ¤ë‹ˆí«

> ë²„íŠ¼/ìœ„ì ¯ì„ ë‹¤ë¥¸ í™”ë©´ì— ë¶™ì¼ ë•Œ ì°¸ê³ 

```dart
// QR ë²„íŠ¼ ì˜ˆì‹œ
import 'package:your_app/widgets/qr_button.dart';
...
QRFab(onScan: () { /* TODO: handle result */ });
```

```dart
// ë‚´ ìœ„ì¹˜ ë²„íŠ¼ ì˜ˆì‹œ
import 'package:your_app/widgets/locate_button.dart';
...
LocateFab(onLocate: () { /* TODO: start BLE scan */ });
```

---
